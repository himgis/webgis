<!DOCTYPE html>
<html>
<head>
    <title>Upload Shapefile ZIP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body { font-family: Arial; background: #f3e5f5; padding: 50px; text-align: center; }
        h1 { color: #6a1b9a; }
        input, button { padding: 18px 40px; font-size: 20px; margin: 15px; border-radius: 12px; }
        button { background: #9c27b0; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background: #7b1fa2; }
        #msg { margin: 30px; font-size: 22px; font-weight: bold; }
    </style>
</head>

<body>

    <h1>Upload Shapefile (ZIP)</h1>

    <input type="file" id="f" accept=".zip"><br>
    <button onclick="upload()">UPLOAD</button>

    <div id="msg"></div>

    <hr>
    <a href="/" style="font-size:20px;color:#9c27b0">Back to Map</a>

<script>
async function upload() {
    const file = document.getElementById('f').files[0];
    if (!file) {
        alert("Please select a ZIP file");
        return;
    }

    const fd = new FormData();
    fd.append("file", file);

    document.getElementById("msg").innerHTML = "Uploading...";

    let res = await fetch("/upload", {
        method: "POST",
        body: fd
    });

    let j = await res.json();

    if (res.ok) {
        document.getElementById("msg").innerHTML =
            "<span style='color:green'>Uploaded Layer: <b>" + j.layer + "</b></span>";
    } else {
        document.getElementById("msg").innerHTML =
            "<span style='color:red'>ERROR: " + j.error + "</span>";
    }
}
</script>

</body>
</html>
